# RISCVSimulator

Simple pluggable RISCV64IMF simulator, works on Linux.

## For Contributors

To initialize your workspace after your first `git clone` operation, use __init.sh__.

## 安装程序

运行init.sh初始化工作区，之后运行`compile.sh`以完成编译安装。在完成编译之后需要将riscv-toolchain中附带的`objdump`程序复制到`tools/`文件夹。

## 使用程序

利用`run.sh`运行程序。

在程序主界面使用菜单中的“打开”选项可以读取并打开ELF文件，打开成功后程序将在主界面加载文件中的代码，使用鼠标滚轮可进行上下翻动。在每一行单击行号左方的区域可以添加/删除断点。

利用“调试”菜单栏中的“运行“选项可运行程序，”单步运行“选项可单步执行程序，”暂停“选项可以暂停运行中的程序，”停止“选项可将虚拟机复位，”继续“选项可从暂停处开始继续执行。

利用”查看“菜单栏中的各选项可以查看并修改机器信息（内存，寄存器），可以查看符号表。在”内存“页面可以输入起始地址以查看或修改从此地址开始的256字节内存内容，在“符号表”页面可以输入符号名称前缀以搜索符号。

利用“控制台”项可与程序进行交互。

## 测试样例

`test/hello.o`是一个可加载并运行的程序。
内存地址65536是text段的起始地址，可以通过查看此地址的内容检视程序。

## 程序功能目标

1. 实现RISCV-IMF指令集

2. 实现系统调用

3. 调试功能（断点，单步调试，运行程序，控制台，查看寄存器、内存、符号表，修改寄存器、内存）

4. 指令添加：只需要修改对应的config文件，添加指令的数据通路

5. 可插接的模拟器实现：用户实现一组CombineLogic类，实现MachineController类即可改变模拟器的具体实现。

6. 可插接的系统调用实现：用户实现一组Syscall类，并在config文件中注册系统调用即可使用自己的系统调用实现。

## 完成度

UI交互与系统调用已经调试通过，虚拟机本身的指令执行功能仍然存在bug，本目录下的代码执行时并不会实际运行指令，而是简单地将PC自增。